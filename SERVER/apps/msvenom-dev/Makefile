APP_NAME ?= msvenom-dev
ZIP_NAME := $(APP_NAME).zip
EXPORTED := ../../exported/$(APP_NAME)
SOURCE_ZIP := Source.zip

all: prepare unzip install rename

prepare:
	@echo "ðŸ”§ Iniciando instalaciÃ³n de $(APP_NAME)..."

unzip:
	@echo "ðŸ“¦ Descomprimiendo $(SOURCE_ZIP)..."
	@unzip $(SOURCE_ZIP) -d .

install:
	@echo "ðŸ“¥ Instalando dependencias..."
	@pip install -r requirements.txt

rename:
	@echo "ðŸ”„ Renombrando main.py a $(APP_NAME)..."
	@mv main.py $(APP_NAME).py
	@echo "âœ… InstalaciÃ³n completada: ejecuta './$(APP_NAME)' para iniciar"

#  -- build --

build:
	@echo "ðŸ§± Compilando $(APP_NAME).py a ejecutable..."
	@python3 -m nuitka --standalone --onefile \
		--output-dir=$(EXPORTED) \
		--output-filename=$(APP_NAME).bin $(APP_NAME).py

package: build
	@echo "ðŸ“¦ Comprimiendo en '$(ZIP_NAME)'..."
	@cd ../../exported && zip -r $(ZIP_NAME) $(APP_NAME)
	@echo "âœ… Exportado: exported/$(ZIP_NAME)"